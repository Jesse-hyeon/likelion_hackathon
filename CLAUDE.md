# 광어 질병 탐지 AI 프로젝트

## 프로젝트 개요

### 목적
정상 데이터 없이 질병 데이터만으로 광어의 질병 여부를 판별하는 AI 모델 개발

### 데이터 현황
- 질병 광어 이미지: 100장 (RGB)
- 초분광(Hyperspectral) 이미지: 100장 (112개 스펙트럼 밴드)
- 정상 광어 이미지: 0장
- 질병 종류: 7가지 (연쇄구균증, 비브리오증, 스쿠티카증 등)
- 라벨링: 질병 부위 바운딩박스 + 질병 ID

---

## 현재 진행 상황

### 완료된 작업
1. 데이터 구조 분석 완료
2. One-Class SVM 모델 구현 및 테스트
3. 가짜 정상 데이터를 이용한 성능 평가
4. 고도화 모델 아키텍처 설계

### 측정된 성능
- 전체 정확도: 85.3%
- 질병 탐지율(민감도): 80.0%
- 정상 구분율(특이도): 100.0%

### 중요 사항
**현재 성능은 과대평가되었습니다.** 가짜 정상 데이터가 너무 극단적(색상 반전, 과도한 블러 등)이어서 실제 정상 광어에 대한 성능은 60-70% 수준으로 예상됩니다.

---

## 프로젝트 구조

```
PythonProject_likelion/
├── CLAUDE.md                     # 이 문서
├── simple_fish_detector.py       # One-Class SVM 구현
├── test_with_pseudo_normal.py    # 성능 테스트 코드
├── advanced_fish_detection.py    # 고도화 모델 (Deep SVDD, PatchCore 등)
├── input/
│   ├── 01.원천데이터/
│   │   ├── 01.RGB Data/         # RGB 이미지
│   │   └── 02.Hyper Spectral/   # 초분광 데이터 (미활용)
│   └── 02.라벨링데이터/         # JSON 형식 라벨
└── results/                      # 분석 결과
```

---

## 기술적 접근 방법

### 현재 구현: One-Class SVM
- 질병 데이터만으로 학습
- 질병 패턴의 경계를 학습하여 경계 밖의 데이터를 정상으로 판단
- 구현 완료, 실행 가능

### 계획된 고도화 방법

#### 1. PatchCore (우선순위 1)
- 사전학습된 ResNet 활용
- 학습 과정 불필요 (메모리 뱅크만 구축)
- 예상 성능: 90-92%
- 즉시 구현 가능

#### 2. Hyperspectral Fusion (우선순위 2)
- RGB 3채널 + 초분광 112밴드 = 총 115차원 데이터
- 질병별 고유 스펙트럼 시그니처 활용
- 예상 성능: 92-97%
- 데이터 이미 보유

#### 3. Deep SVDD
- 심층 신경망을 통한 hypersphere 학습
- 질병 데이터를 하나의 중심점으로 매핑
- 예상 성능: 85-90%

#### 4. Vision Transformer (MAE)
- 최신 Masked Autoencoder 기법
- Self-supervised 학습
- 예상 성능: 93-98%
- 구현 난이도 높음

---

## 즉시 실행 가능한 작업

### 1. 현재 코드 테스트
```bash
# 기본 모델 실행
python simple_fish_detector.py

# 성능 평가 (가짜 정상 데이터 포함)
python test_with_pseudo_normal.py
```

### 2. 필요 라이브러리 설치
```bash
# 기본 라이브러리
pip install numpy scikit-learn pillow matplotlib

# 고도화 모델용 (선택)
pip install torch torchvision
```

---

## 다음 단계 권장사항

### 단기 (1주 이내)
1. **정상 광어 데이터 확보** - 최소 10-20개
   - 실제 성능 검증에 필수
   - 임계값 조정 가능
   
2. **PatchCore 구현**
   - `advanced_fish_detection.py`의 PatchCore 클래스 완성
   - 사전학습 모델 활용으로 즉시 고성능 달성

### 중기 (2주)
3. **초분광 데이터 활용**
   - 112개 스펙트럼 밴드 특징 추출
   - RGB와 융합하여 성능 향상
   
4. **Deep Learning 모델 학습**
   - Deep SVDD 또는 Autoencoder
   - GPU 환경 필요

### 장기 (1개월)
5. **앙상블 모델 구축**
   - 여러 모델 조합
   - 신뢰도 점수 제공
   - Production 배포 준비

---

## 주요 인사이트

### 핵심 발견
1. **초분광 데이터가 핵심 자산**
   - 현재 미활용 상태
   - 112개 밴드는 RGB(3개)보다 37배 많은 정보
   - 질병별 고유 스펙트럼 패턴 존재 가능성

2. **정상 데이터 없이도 가능하지만 한계 존재**
   - One-Class Classification으로 개념 증명 완료
   - 실제 성능 검증을 위해 정상 데이터 필수
   - 10개만 있어도 큰 개선 가능

3. **현재 성능의 해석**
   - 85.3%는 과대평가된 수치
   - 실제 예상: 60-70%
   - 1차 스크리닝 도구로는 활용 가능

---

## 성능 개선 예측

| 단계 | 방법 | 예상 성능 | 필요 사항 |
|------|------|-----------|-----------|
| 현재 | One-Class SVM | 60-70% | - |
| 1단계 | PatchCore | 85-90% | 사전학습 모델 |
| 2단계 | + 초분광 데이터 | 90-95% | 데이터 융합 |
| 3단계 | + 정상 데이터 10개 | 92-97% | 데이터 수집 |
| 최종 | 앙상블 모델 | 95-98% | 모든 방법 조합 |

---

## 프로젝트 재개 시 체크리스트

1. [ ] CLAUDE.md (이 문서) 전체 읽기
2. [ ] `simple_fish_detector.py` 실행하여 현재 상태 확인
3. [ ] 정상 광어 데이터 확보 가능 여부 확인
4. [ ] PyTorch 설치 여부 확인 (고도화 모델용)
5. [ ] 초분광 데이터 활용 계획 수립

---

## 기술 스택

- **언어**: Python 3.8+
- **주요 라이브러리**: scikit-learn, NumPy, Pillow
- **딥러닝** (선택): PyTorch, torchvision
- **데이터**: JSON 라벨링, JPG/PNG 이미지

---

## 문의사항 대응

### Q: 정상 데이터 없이 정말 가능한가?
A: 가능합니다. One-Class Classification 기법으로 질병 패턴을 학습하고, 이와 다른 패턴을 정상으로 판단합니다. 단, 실제 성능 검증을 위해서는 정상 데이터가 필요합니다.

### Q: 초분광 데이터를 왜 사용하지 않았나?
A: 초기 구현에서는 RGB 데이터만으로 개념 증명을 했습니다. 초분광 데이터 활용이 다음 주요 과제입니다.

### Q: 실제 배포 가능한 수준인가?
A: 현재는 프로토타입 수준입니다. 정상 데이터 10개 이상 확보 후 재평가가 필요합니다.

---

*마지막 업데이트: 2024년*
*다음 작업자를 위한 문서*